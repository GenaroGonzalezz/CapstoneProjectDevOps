name: First Workflow

on:
  push:
  pull_request:
  
jobs:
    myfirstjob:
              name: First Job
              runs-on: ubuntu-latest
              steps:
              - name: Checkout code
                uses: actions/checkout@v3 #Clone the repo on the runner Ubuntu
              - name: Setup Node
                uses: actions/setup-node@v3
                with: 
                  node-version: 18
              
              - name: Install dependencies
                run: npm ci
                
              - name: Run tests
                run: npm test
                
              - name: Build Docker image
                if: ${{ success() }}
                uses: docker/build-push-action@v2
                with:
                  context: .
                  push: true
                  tags: gena/capstone-app:latest
                  
    mysecondjob:
              needs: [myfirstjob] #Wait for the first job to be finished to start with the second
              name: Second Job
              runs-on: macos-latest
              steps:
              - name: Step One
                run: date
    mythirdjob:
              name: Third Job
              runs-on: windows-latest
              steps:
              - name: Step One
                run: date
